### 重构代码时，需要注意的地方

- 目标清晰：在重构代码之前，**需要明确重构的目标是什么**，例如提高代码的可读性、可维护性、性能等等。明确目标可以帮助你更有针对性地进行重构，并且在重构过程中能够更好地衡量成果。

- 不改变功能：重构的目的是优化代码的质量，而不是改变代码的功能。因此，在重构代码时，需要**确保代码的行为和功能没有发生变化**。

- 使用测试：重构代码之前，一定要确保代码**已经有了足够的测试覆盖率**。在重构过程中，需要运行测试用例来确保代码的行为没有发生变化，并且重构后的代码仍然能够正确地工作。

- 小步前进：重构代码时，需要一步一步地进行，每次只重构一小部分代码，并运行测试用例检查结果。这样做可以保证重构过程的可控性，并且减少出错的可能性。

- 保留历史记录：在重构代码之前，需要备份当前代码，以便在需要时可以回滚到原来的代码。在重构过程中，也需要保留历史记录，以便在需要时可以查看代码的变化。

- 重构不是重写：重构代码不等同于重写代码。重写代码通常需要重新设计和实现，而重构代码只是对现有代码进行优化和调整，保留原有代码的逻辑和结构。

- **代码风格统一**：在重构代码时，可以考虑调整代码的风格，使得代码更加清晰易懂。但是需要注意的是，风格的统一需要遵循项目的编码规范和约定。
- 适时重构：重构代码需要适时进行，不能太频繁地进行。频繁的重构会增加代码的复杂度和维护成本，而且有可能引入新的问题。因此，需要在合适的时候进行重构，例如在代码需要添加新功能或修复问题时。



### 写需求文档和模块设计文档时，有以下需要注意的地方

1. 需求文档需要具体、清晰、可验证：需求文档应该尽量具体、清晰，避免使用模棱两可的词语和抽象的描述，以免引起理解上的偏差。另外，需求文档需要可验证，即需要能够通过测试等方式验证实现是否符合需求文档的要求。
2. 模块设计文档需要完整、详细：模块设计文档需要尽可能完整、详细，包括**模块的输入、输出、功能、接口、流程**等。模块设计文档应该包括对模块实现的设计方案、算法、数据结构等的详细描述，以便其他人员能够理解和实现。
3. 确认需求：在编写需求文档时，需要与相关人员进行确认和讨论，以确保需求的准确性和完整性。同时，需要及时记录下与相关人员的沟通内容和反馈，以便在需求变更时可以追溯和协调。
4. 设计文档需要具备可读性：设计文档需要具备良好的可读性和易于理解，包括适当的**图表、表格、代码示例**等，以便其他人员能够快速理解和实现。
5. 考虑可维护性：在编写设计文档时，需要考虑到代码的可维护性，包括代码的可读性、可测试性、可扩展性等，以便后续的维护和修改。
6. 注意文档的格式和风格：文档的格式和风格需要统一，包括字体、字号、缩进、段落格式等，以便文档的阅读和编辑更加方便。同时，需要注意文档的语言风格，以避免出现歧义或者误解。
7. **不断更新文档**：在项目的不同阶段，需求和设计都可能发生变化，因此，需要不断更新和维护需求文档和模块设计文档，以保证文档与实际代码实现的一致性。



### 需求文档和模块设计文档 通常是什么人员来写

- 需求文档和模块设计文档通常由软件开发团队中的技术人员来编写，包括项目经理、产品经理、需求分析师、架构师、开发工程师、测试工程师等。
- 在软件开发过程中，**需求文档**是软件开发的起点，需求分析师负责根据客户需求，进行需求分析和确定需求规格，编写需求文档。需求文档通常需要经过**产品经理、客户和开发团队**的确认和讨论，以确保需求的准确性和完整性。
- 而**模块设计文档**通常由**架构师和开发工程师**来编写。架构师负责制定系统架构和模块划分方案，开发工程师根据架构师提供的模块划分方案，进行模块设计和编写模块设计文档。模块设计文档需要经过开发团队的内部评审和确认，以确保设计方案的可行性和实现性。



### 需求文档

1. **产品背景和目的**：介绍产品的背景和目的，包括为什么需要这个产品，以及这个产品的主要目标。
2. 需求描述：详细描述**产品的功能和性能需求**，包括系统的输入和输出、用户需求、业务流程等。
3. 非功能需求：描述产品的非功能需求，包括性能、安全、可用性、可维护性等。
4. 界面设计和用户体验：描述产品的用户界面设计和用户体验，包括用户界面的布局、颜色、字体、交互方式等。
5. 数据设计：描述产品的数据结构、数据格式、数据流等。
6. **安全需求**：描述产品的安全需求，包括用户认证、权限控制、数据加密等。
7. **测试需求**：描述产品的测试需求，包括测试计划、测试用例、测试环境等。
8. **部署需求**：描述产品的部署需求，包括硬件、软件、网络环境等。
9. **维护和支持需求**：描述产品的维护和支持需求，包括故障排查、更新和升级、技术支持等。
10. **项目计划和进度**：描述产品的项目计划和进度，包括开发周期、里程碑、交付时间等。

需要注意的是，需求文档需要具体、清晰、可验证，同时需要与相关人员进行确认和讨论，以确保需求的准确性和完整性。



### 架构和模块设计文档

1. 系统架构：描述整个系统的架构，包括系统的**层次结构、模块划分、模块之间的关系和依赖**等。
2. 功能模块设计：详细描述**每个模块的功能和实现细节**，包括**模块的输入和输出、接口、算法和数据结构**等。
3. 数据库设计：描述数据库的结构和设计，包括表结构、关系、索引、数据类型等。
4. 网络通信设计：描述系统中的网络通信方式、协议、端口等。
5. 安全设计：描述系统的安全设计，包括用户认证、权限控制、数据加密、防止攻击等。
6. 性能设计：描述系统的性能设计，包括响应时间、吞吐量、并发性、可扩展性等。
7. 日志和异常处理设计：描述系统的**日志和异常处理设计**，包括日志记录方式、异常处理方式、告警方式等。
8. 软件版本控制：描述系统的**版本控制方式、分支管理**等。
9. 部署和运维设计：描述系统的部署和运维设计，包括部署方式、环境配置、监控和维护等。
10. **接口文档**：描述系统中各个模块的**接口文档，包括参数、返回值、异常处理**等。

需要注意的是，架构和模块设计文档需要具体、清晰、可验证，同时需要与相关人员进行确认和讨论，以确保设计方案的可行性和实现性。设计文档还需要根据实际开发情况进行不断调整和完善。



### 质量流程

- 1）需求设计
  大方向：需求文档 模块 接口
  各部门：设计文档 各模块内部实现
  工具：Wiki UML 思维导图
  重点：架构设计-实现 保持一致
- 2）质量看护
  普通开发层面：责任意识 质量意识
  保证本身没问题->不局限于自己没问题，排查解决一类问题->固化成果，用集成/单元测试看护->完成闭环
  本身零缺陷 高质量交付到下一环
  管理层面：问题回溯，全电子流跟踪，有迹可查，内部排查自检&分享，避免重犯
- 3）代码检视Review
  基础层次：代码功能正确，正常功能及容错场景无问题
  架构层次：检视代码实现手法是否合理，是否重复造轮子，是否简答易懂，是否更好抽象，有更好的设计模式
  方案设计层次：检视整体方案流程设计，模块是否往熵增方向发展；接口设计是否合理，和其他组件切割是否合适；场景是否是全量场景，是否遗漏
- 4）测试注意事项
  全场景覆盖 多重防护网 尽量在测试时暴露问题
  开发白盒测试 测试人员黑盒测试 实验室测 外场测试
  自动化检查工具 脚本工具（对于规律性极强的）



### AI模型推理训练、部署、上线完整流程

1）介绍旷视模型了解（分类/分割/目标检测/降噪）；介绍硕士论文经验（系统学习吴恩达）。介绍同学。
2）介绍AI推理引擎（深度学习框架）：TensorFlow、Pytorch、MegEngine（内部）。
3）介绍模型整个流程：
a）数据预处理：训练集-验证集-测试集、数据增广、数据归一化、数据预训练（迁移学习到特征提取）。
b）模型训练（模型结构、前向/反向传播-梯度下降）& 调优（性能/内存调优（3种，聊），效果调优（模型结构，超参数，聊））
c）模型测试验证：性能、准确性（对分）。
d）模型推理优化：量化、模型蒸馏、剪枝、分布式推理。
e）模型部署：移动端部署（需要和snpe/apu软硬件打通）、云端部署（利用服务器硬件）。